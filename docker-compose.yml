version: "3.8"

services:

  # =========================
  # üêò PostgreSQL
  # =========================
  postgresql:
    image: postgres:15-alpine
    container_name: postgresql
    restart: always
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: simple-admin.
    ports:
      - "5432:5432"
    volumes:
      - /home/a/data/postgres:/var/lib/postgresql/data
    networks:
      - postgresql_simple-admin

  # =========================
  # ‚öôÔ∏è Plusins RPC Service
  # =========================
  plusins-rpc:
    build:
      context: ./plusins_rpc
    container_name: plusins-rpc
    restart: always
    ports:
      - "9103:9103"
    environment:
      TZ: Asia/Manila
    depends_on:
      - redis
      - postgresql
    networks:
      - postgresql_simple-admin

  # =========================
  # üåê Plusins API Service
  # =========================
  plusins-api:
    build:
      context: ./plusins_api
    container_name: plusins-api
    ports:
      - "8081:8081"
    restart: always
    environment:
      TZ: Asia/Manila
      GOMODCACHE: /go/pkg/mod
    depends_on:
      - plusins-rpc
    volumes:
      - /home/a/gg-pr-plusins/plusins_api/etc:/app/etc
      - /home/a/simple-admin-core/resource/i18n:/app/resource/i18n
      - /home/a/.cache/go-mod:/go/pkg/mod
    networks:
      - postgresql_simple-admin

  # =========================
  # üß© Plusins Business API
  # =========================
  plusins-business:
    build:
      context: ./plusins_business
    container_name: plusins-business
    ports:
      - "8082:8082"
    restart: always
    environment:
      TZ: Asia/Manila
      GOMODCACHE: /go/pkg/mod
    depends_on:
      - plusins-rpc
    volumes:
      - /home/a/gg-pr-plusins/plusins_business/etc:/app/etc
      - /home/a/simple-admin-core/resource/i18n:/app/resource/i18n
      - /home/a/.cache/go-mod:/go/pkg/mod
    networks:
      - postgresql_simple-admin

networks:
  postgresql_simple-admin:
    external: true
